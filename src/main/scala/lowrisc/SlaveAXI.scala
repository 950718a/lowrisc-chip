// See LICENSE.Cambridge for license details.

package freechips.rocketchip.lowrisc

import Chisel._
import freechips.rocketchip.config.{Field, Parameters}
import freechips.rocketchip.diplomacy._
import freechips.rocketchip.tilelink._
import freechips.rocketchip.amba.axi4._
import freechips.rocketchip.coreplex.{HasSystemBus, HasMasterAXI4MMIOPortBundle}
import scala.collection.mutable.HashMap
import scala.collection.Map

/** The parameters defining an external device on the MMIO AXI
  * @param size         The register space of this device
  * @param beatBytes    The number of bytes per beat
  * @param burstBytes   The number of bytes per burst
  * @param interrupts   The number of interrupts generated by this device
  */
case class ExSlaveParams(
  size: AddressSet,
  beatBytes: Int = 4,
  burstBytes: Int = 4,
  interrupts: Int = 0,
  executable: Boolean = false
)

/** The parameter collection of all external slave devices
  * @param base         An optional manually specified base address.
                        It may turns out conflict with existing address configuration.
  * @param slaves       The individual parameters of slaves.
  */
case class ExBusParams(
  base: Option[Long],
  slaves: HashMap[String, ExSlaveParams]
)

case object ExBus extends Field[ExBusParams]
